{% extends "base.html" %}

{% block title %}Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© - Ù…Ù†ØµØ© ØªÙˆØ¸ÙŠÙ Ù†Ø¬Ø±Ø§Ù†{% endblock %}

{% block content %}
<div class="container">
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© -->
    <div style="background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(29, 78, 216, 0.05) 100%); padding: 2.5rem; border-radius: 1.5rem; margin-bottom: 3rem; border: 1px solid rgba(37, 99, 235, 0.1);">
        <h2 style="margin-bottom: 1.5rem; color: #1e293b; font-size: 1.75rem; font-weight: 700;">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸ÙŠÙØ© Ø£Ø­Ù„Ø§Ù…Ùƒ</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <div class="form-group" style="margin-bottom: 0;">
                <select id="city-filter">
                    <option value="">ğŸ“ ÙƒÙ„ Ø§Ù„Ù…Ø¯Ù†</option>
                    {% for city in cities %}
                        <option value="{{ city[0] }}">{{ city[0] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group" style="margin-bottom: 0;">
                <select id="category-filter">
                    <option value="">ğŸ·ï¸ ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>
                    {% for cat in categories %}
                        <option value="{{ cat[0] }}">{{ cat[0] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group" style="margin-bottom: 0;">
                <select id="type-filter">
                    <option value="">â° Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ§Ù…</option>
                    <option value="Full-time">Ø¯ÙˆØ§Ù… ÙƒØ§Ù…Ù„</option>
                    <option value="Part-time">Ø¯ÙˆØ§Ù… Ø¬Ø²Ø¦ÙŠ</option>
                    <option value="Internship">ØªØ¯Ø±ÙŠØ¨</option>
                </select>
            </div>
            <button onclick="searchJobs()" class="btn btn-primary" style="width: 100%;">ğŸ” Ø¨Ø­Ø«</button>
        </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <h2 style="margin-bottom: 2rem; color: #1e293b; font-size: 1.75rem; font-weight: 700;">
        âœ¨ Ø£Ø­Ø¯Ø« Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©
        <span style="color: #64748b; font-size: 1rem; font-weight: 400;">
            {% if jobs.total %}({{ jobs.total }} ÙˆØ¸ÙŠÙØ©){% endif %}
        </span>
    </h2>
    
    {% if jobs.items %}
        <div class="jobs-grid">
            {% for job in jobs.items %}
                <a href="{{ url_for('job_detail', job_id=job.job_id) }}" class="job-card fade-in">
                    <!-- Ø±Ø£Ø³ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© -->
                    <div class="job-header">
                        <div style="flex: 1;">
                            <h3 class="job-title">{{ job.title }}</h3>
                            <p class="company-name">{{ job.company.company_name }}</p>
                        </div>
                        <div class="company-logo">ğŸ¢</div>
                    </div>

                    <!-- Ø§Ù„ØªØ§ØºØ§Øª Ø§Ù„Ù…Ù„ÙˆÙ†Ø© -->
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
                        <span class="job-type-tag 
                            {% if job.job_type == 'Full-time' %}tag-fulltime
                            {% elif job.job_type == 'Part-time' %}tag-parttime
                            {% elif job.job_type == 'Internship' %}tag-internship
                            {% else %}tag-remote{% endif %}">
                            {% if job.job_type == 'Full-time' %}Ø¯ÙˆØ§Ù… ÙƒØ§Ù…Ù„
                            {% elif job.job_type == 'Part-time' %}Ø¯ÙˆØ§Ù… Ø¬Ø²Ø¦ÙŠ
                            {% else %}ØªØ¯Ø±ÙŠØ¨{% endif %}
                        </span>
                    </div>

                    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙØ© -->
                    <div class="job-meta">
                        <div class="meta-item">ğŸ“ {{ job.city }}</div>
                        <div class="meta-item">ğŸ·ï¸ {{ job.category_name }}</div>
                    </div>

                    <!-- Ø§Ù„ÙˆØµÙ -->
                    <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.5;">
                        {{ job.description }}
                    </p>

                    <!-- Ø§Ù„Ø±Ø§ØªØ¨ -->
                    <div class="job-salary">
                        {% if job.salary %}
                            ğŸ’° {{ job.salary }}
                        {% else %}
                            ğŸ’° ÙŠØ­Ø¯Ø¯ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø©
                        {% endif %}
                    </div>
                </a>
            {% endfor %}
        </div>

        <!-- Ø§Ù„ØªØ±Ù‚ÙŠÙ… -->
        {% if jobs.pages > 1 %}
            <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 3rem; flex-wrap: wrap;">
                {% for page_num in jobs.iter_pages() %}
                    {% if page_num %}
                        <a href="{{ url_for('index', page=page_num) }}" class="btn {% if page_num == jobs.page %}btn-primary{% else %}btn-secondary{% endif %}" style="padding: 0.5rem 1rem; border-radius: 0.75rem;">
                            {{ page_num }}
                        </a>
                    {% else %}
                        <span style="padding: 0.5rem; color: #94a3b8;">...</span>
                    {% endif %}
                {% endfor %}
            </div>
        {% endif %}
    {% else %}
        <!-- Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ÙˆØ¸Ø§Ø¦Ù -->
        <div style="background: white; padding: 4rem 2rem; border-radius: 1.5rem; text-align: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); border: 1px solid #e2e8f0;">
            <p style="color: #64748b; font-size: 1.2rem; margin-bottom: 1rem;">ğŸ˜” Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ.</p>
            <p style="color: #94a3b8; margin-bottom: 1.5rem;">ÙŠØ±Ø¬Ù‰ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¨Ù…Ø¹Ø§ÙŠÙŠØ± Ù…Ø®ØªÙ„ÙØ© Ø£Ùˆ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.</p>
            <a href="{{ url_for('index') }}" class="btn btn-primary">ğŸ”„ Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</a>
        </div>
    {% endif %}
</div>

<style>
    .fade-in {
        animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
{% endblock %}
